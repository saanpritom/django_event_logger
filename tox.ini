# content of: tox.ini , put in same dir as setup.py
[tox]
envlist = py36
          django31-py36
          django30-py36
          django22-py36
          django21-py36

# Add environment to use the default python3 installation. As in virtualenv python is python3
[testenv:py3]
basepython = python

[testenv]
# install pytest in the virtualenv where commands will be executed
deps = -rrequirements.txt
changedir = .tox
allowlist_externals = /bin/mkdir
                      /bin/rm
                      /bin/cp
commands =
    # NOTE: you can run any command line tool here - not just tests
    mkdir tox_test_django_event_logger
    django-admin startproject tox_test_django_event_logger tox_test_django_event_logger/
    rm tox_test_django_event_logger/tox_test_django_event_logger/settings.py
    rm tox_test_django_event_logger/tox_test_django_event_logger/urls.py
    cp ../test_resources/django_files/settings.py tox_test_django_event_logger/tox_test_django_event_logger/
    cp ../test_resources/django_files/urls.py tox_test_django_event_logger/tox_test_django_event_logger/
    python tox_test_django_event_logger/manage.py makemigrations
    python tox_test_django_event_logger/manage.py migrate
    python tox_test_django_event_logger/manage.py test django_event_logger
    rm -rf tox_test_django_event_logger/
