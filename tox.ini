# content of: tox.ini , put in same dir as setup.py
[tox]
envlist = py36
          django30-py36
          django22-py36
          django21-py36

# Add environment to use the default python3 installation. As in virtualenv python is python3
[testenv:py3]
basepython = python

[testenv]
# install pytest in the virtualenv where commands will be executed
deps =
      Django==3.0
      pytz==2020.1
      sqlparse==0.3.1
changedir = .tox
allowlist_externals = /bin/mkdir
                      /bin/rm
                      /bin/cp
commands =
    # NOTE: you can run any command line tool here - not just tests
    mkdir tox_test_django_event_logger
    django-admin --version
    django-admin startproject tox_test_django_event_logger tox_test_django_event_logger/
    rm tox_test_django_event_logger/tox_test_django_event_logger/settings.py
    rm tox_test_django_event_logger/tox_test_django_event_logger/urls.py
    cp ../test_resources/django_files/settings.py tox_test_django_event_logger/tox_test_django_event_logger/
    cp ../test_resources/django_files/urls.py tox_test_django_event_logger/tox_test_django_event_logger/
    python tox_test_django_event_logger/manage.py makemigrations
    python tox_test_django_event_logger/manage.py migrate
    python tox_test_django_event_logger/manage.py test django_event_logger
    rm -rf tox_test_django_event_logger/


[django]
2.2 =
    Django>=2.2.0,<2.3.0
2.1 =
    Django>=2.1.0,<2.2.0
3.0 =
    Django>=3.0.0,<3.1.0
